name: Build Arcade Roms DB

on:
#  schedule:
#  - cron:  "*/20 * * * *"
  workflow_dispatch:

jobs:
  build:
    runs-on: ubuntu-20.04

    steps:
    - uses: actions/checkout@v2

    - name: Build
      run: |
        set -euo pipefail
        git config --global user.email "theypsilon@gmail.com"
        git config --global user.name "The CI/CD Bot"
        python3 build_arcade_roms_db.py
        git checkout --orphan db
        git reset
        ls -ltrca
        git status -s
        git add arcade_roms_db.json.zip
        git commit -m "-"
        git push --force origin db